@import "reset";
@import "variables";
@import "font";
@import "print";

// All pages and width holders
* {
	box-sizing:border-box;
}
html {
	-webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-family: sans-serif;
    -ms-text-size-adjust: 100%;
    -webkit-text-size-adjust: 100%;
    font-size:$fontsize;
}
body {
	background-color: $altcolor;
	height:100%;
	width:100%;
	min-height:100%;
}
.full-content {
	display:flex;
	flex-wrap:wrap;	
	width:100%;
	padding: $small-spacing;
	justify-content:space-between;
}
.wide-content {
	display:flex;
	flex-wrap:wrap;
	padding:0;
	width:100%;
	max-width:100%;
	justify-content:space-between;
}
.page-content {
	width:calc(100% - 20px);
	margin: 0 10px;
	min-height:100vh;
	justify-content:space-between;
	background-color:$bgcolor;
}
.divider {
	display:flex;
	flex-wrap:wrap;
	width:100%;
	padding: 0 0 $small-spacing;
	justify-content:space-between;
}

// General styles

a {
	color:initial;
	text-decoration:none;
	border-bottom:2px solid $primarycolor;
	&.simple {
		color:inherit;
		border:none;
	}
}

.footer {
	padding-bottom:0;
	background-color:$color;
	color:$bgcolor;
}
.tag {
	background-color: $primarycolor;
    color:$bgcolor;
    padding: 0 $tag-padding;
    text-transform: uppercase;
    font-size: 0.8 * $fontsize;
}
//Header
#nav {
	width:100%;
	display:flex;
	justify-content:center;
	height: calc(2 * #{$mid-spacing});
	line-height: calc(2 * #{$mid-spacing});
	padding: 0 $mid-spacing;
	text-transform:uppercase;
	z-index:2;
	position:absolute;
	top:0;
	color:$bgcolor;
	background-color:rgba($bgcolor,0.9);
	transition:all 0.3s linear;
	&:hover {
		background-color:rgba($bgcolor,1);
		transition:all 1s cubic-bezier(0.24, 0.87, 0.88, 0.02);
	}
	a {
		position: relative;
		border-bottom:none;
	}
	a:not(:last-child) {
		padding-right: $mid-spacing;
	}
	a:nth-child(1) {
		align-self:flex-start;
		margin-right:auto;
		display: none;
	}
	&:not(.home) a:nth-child(2) {
		padding: 0;
		align-self: flex-start;
		margin-right: auto;
	}
	a i {
		padding-left: calc(#{$small-spacing} / 2);
	}
	i:before {
		line-height: calc((2 * #{$mid-spacing}) - 1px);
	}
}

#menu {
	display: none;
    width: 100vw;
    height: 100vh;
    position: fixed;
    top: 0;
    left: 0;
    background-color: rgba($primarycolor,1);
    z-index: 99;
    opacity:0;
    transition: opacity 1s;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    li {
    	text-transform: uppercase;
    	color:$bgcolor;
    	font-size:2.25em;
    }
    .close {
	  position: absolute;
	  right: 1.125em;
	  top: 1.125em;
	  width: 2.25em;
	  height: 2.25em;
	  opacity: 0.3;
	  content: '';
	  cursor:pointer;
	}
	.close:hover {
	  opacity: 1;
	}
	.close:before, .close:after {
	  position: absolute;
	  left: 1.125em;
	  content: ' ';
	  height: 2.25em;
	  width: 2px;
	  background-color: $bgcolor;
	}
	.close:before {
	  transform: rotate(45deg);
	}
	.close:after {
	  transform: rotate(-45deg);
	}
}
.menuopen {
	overflow:hidden;
	#menu {
		display:flex;
		opacity:1;
	}
}

#cover {
	height:100%;
	width:100%;
	height:100vh;
	width:100vw;
	overflow:hidden;
	position:relative;
	z-index:4;
	figure {
	    width: 100%;
	    height: 100%;
	    width: 100vw;
	    height: 100vh;
		img {   
			display: block;
		    width: 100vw;
		    height: 100%;
		    object-fit: cover;
		}
	}
	figcaption {
		position: absolute;
	    bottom: 0;
	    right: 0;
	    left: 0;
	    z-index: 4;
	    color: white;
	    text-transform: uppercase;
	    margin: 1em;
	    font-size: 1em;
	    text-align:right;
	}
	h1, h2 {
		font-size:inherit;
	}
}
.cover-closed {
	#thepage {
		position:fixed;
		top:0;
		left:0;
		z-index:1;
		width:100%;
	}
}
body:not(.cover-closed){
	padding-bottom: 0 !important;
}
#sitetitle {
	width:300px;    
	position: absolute;
    top: 3em;
    left: 50%;
    transform: rotate(-25deg) skewX(5deg) skewY(5deg) translateX(-50%);
}
//Home styles
.wide-content {
	margin: 0 $small-spacing;
	text-align: center;
	background-color: $bgcolor;
	width:auto;
	height:auto;
	border-top: 2px solid $primarycolor;
	position: relative;
	.more, .less {
		width: 100%;
		text-align: center;
		padding:$small-spacing 0 $mid-spacing;
		position: absolute;
		bottom:0;
		left:0;
		background-color: $bgcolor;
	}
	.less {
		padding:$mid-spacing 0 $small-spacing;
	}
}
.full-content, .wide-content {
	margin-bottom: $mid-spacing;
	> h2 {
		text-align: center;
	}
	> h3 {
		margin:0 0 1em;
		width:100%;
		text-transform:uppercase;
		color: $lightcolor;
		text-align: center;
	}
}
.block {
    width:100%;
	position:relative;
    display:flex;
    margin-bottom:$small-spacing;
	color: $color;
	h4 {
	    color: $color;
	}
    &:nth-of-type(odd) {
    	flex-direction: row-reverse;
    }
	.image {
		overflow: hidden;
		height: 50vw;
   	 	width: 50vw;
	}
	img {
		min-width:100%;
		height:100%;
		width: initial;
		left:50%;
		position:relative;
		transform: translateX(-50%);
	}
	.info {
		display:flex;
		flex-direction:column;
		justify-content:space-between;
		background-color: $bgcolor;
		padding: $small-spacing;
		position: relative;
		height:50vw;
		width:50vw;
		p {
			display: none;
		}
	}
	.tag {
		position: relative;
		display: inline-block;
	}
	h4 {
		//font-weight:700;
		text-transform: uppercase;
		position:relative;
	}
	.track {
		color: $lightcolor;
		margin-top:0;
	}
	.full {
		min-height:2.9em;
	}
	.more, .less {
		position: absolute;
		bottom:$mid-spacing;
		display: none;
	}
}
.featured.block {
	order: 3;
    &:nth-of-type(1) {
    	order:1;
    }
    &:nth-of-type(n+3) {
    	display: none;
    }
}
.featured_popular {
	display:flex;
	flex-direction:column;
	justify-content:space-around;
	counter-reset: popular_entry;
	background-color:$primarycolor;
	color:$bgcolor;
	background-clip: content-box;
	width:100%;
	position:relative;
	order:2;
	.entry {
		width:auto;
		padding: $mid-spacing $small-spacing $mid-spacing (2.5 * $mid-spacing);
	    position:relative;
	    display: flex;
	    align-items:center;
	    margin-left:$mid-spacing;
	    &:nth-of-type(1):not(h3) {
	    	margin-top: 2 * $mid-spacing;
	    }
	    &:last-of-type:not(h3) {
	    	margin-bottom: 2 * $mid-spacing;
	    }
	}
	h3.entry {
		position: absolute;
	    transform: rotate(270deg) translateX(-50%);
	    top: 50%;
	    padding: 0;
	    margin: 0;
	    width: auto;
	    left: 0;
	    transform-origin: $small-spacing 0;
	    font-size: 1em;
	    display: block;
	}
	a::before {
		counter-increment: popular_entry;
		content: counter(popular_entry);
	    position: absolute;
	    //font-weight: bold;
	    font-size: 2em;
	    margin-left: -1.5 * $mid-spacing;
	    top: 50%;
	    transform: translateY(-50%);
	}
}
.playlists {
	overflow:hidden;
	$heading-line-height: 1.2;
	$body-line-height: 1.45;
	$self: $mid-spacing;
	$header: ((1.414em + 2.25em + 0.5em + 1.5em + 1em) * $heading-line-height);
	$more: (#{$small-spacing} + #{$mid-spacing} + (1em * $body-line-height));
	$box: "(((50vw - (4 * 30px)) / 3) + #{$small-spacing})";
	$howmanyboxes: 2;
	max-height: calc(#{$header} + #{$more} + #{$self} + (#{$box} * #{$howmanyboxes}));
	transition: max-height 0.6s ease-in-out;    
	padding-bottom: calc(#{$small-spacing} + #{$mid-spacing} + (1em * 1.45)) !important;
	.more, .less{
		content: '';
		cursor: pointer;
		border-bottom: none;
		text-transform: uppercase;
		color:$lightcolor;
		&:after, &:before {
		    content: "";
		    position: absolute;
		    top: ($mid-spacing + $small-spacing);
		    transform: translateX(-50%);
		    left: 50%;
		    border-style: solid;
		    border-width:$small-spacing ($small-spacing + $mid-spacing) 0 ($small-spacing + $mid-spacing);
		    width:0;
		    height:0;
		}
	}
	.less {
		&:after, &:before {
			top: $small-spacing;
			border-width:0 ($small-spacing + $mid-spacing) $small-spacing ($small-spacing + $mid-spacing);
		}
	}
	.more {
		&:before {
			border-color: $primarycolor transparent transparent; 
		}
		&:after {
			margin-top:-2px;
			border-color: $bgcolor transparent transparent; 
		}
	}
	.less {
		&:before {
			border-color: transparent transparent $primarycolor transparent; 
		}
		&:after {
			margin-top:2px;
			border-color: transparent transparent $bgcolor transparent; 
		}
	}
	.less {
		display:none;
	}
	&.open {
		max-height:1500px;
		.more {
			display:none;
		}
		.less {
			display:block;
		}
	}
}
.playlist.block {
	height: auto;
    width: calc(50vw - #{$small-spacing} - (#{$small-spacing} / 2));
    flex-direction: column;
    overflow: hidden;
    h4 {
    	line-height: 1.45;
    }
	.image {
		height: calc(50vw - #{$small-spacing});
	    width: 100%;
	}
	.info {
	    width: 100%;
	    height:auto;
	}
	.more, .subscribe {
		display: none;
	}
	a {
		border-bottom:none;
	}
}
.archives {
	position: relative;
	.archive.block {
		order:1;
	}
	.load-more {
		order:2;
		display:block;
		height:10px;
		width:10px;
	}
}

// Single styles
.page-content {
	overflow: hidden;
	display: flex;
	flex-direction: column;
	min-height:100vh;
	.title {
		text-align: left;
		width:100%;
		margin-right:auto;
		order:1;
		padding:0 $small-spacing;
	}
	.copy {
		padding: $mid-spacing 0;
		width: 100%;
		margin:0 auto;
		order:3;
		*:not(p) {
			margin:1em auto auto;
		}
	}
	.wp-caption-text {
		display:none;
	}
	.media {
		width: 100%;
		margin-right:auto;
		order:4;	
	}
	.meta {
	    order: 2;
	    text-transform: uppercase;
	    margin: 0 $small-spacing;
	    padding: $small-spacing 0;
	    border-top: 1px solid $primarycolor;
	    border-bottom: 1px solid $primarycolor;
	    line-height: 1.45;
	    li:nth-of-type(n+3) {
	    	display: none;
	    }
	}
	p {
		max-width:680px;
		margin:0 $small-spacing;
	}
	img {
		width:100%;
		height:auto;
	}
	a {
		color:$primarycolor;
	}
	.tag {
	    width:4 * $mid-spacing;
	    text-align: center;
	    margin: $mid-spacing auto;
	}
	iframe {
		max-width:100%;
		&[src*="soundcloud.com"] {
			width: 100%;
	    	height: auto;
		}
	}
	strong, b {
		font-weight: bold;
	}
	em, i {
		font-style: italic;
	}
}
.audioobject {
	img {
		width:initial;
	}
	.info {
		height:initial;
	}
}

//Special Mobile styles
@media(max-width:768px) {
	#cover {
		figcaption {
	    	visibility:hidden;
		}
		&:after {
		    border: 1px solid $bgcolor;
		    border-width: 0 0 2px 2px;
		    width: $small-spacing;
		    height: $small-spacing;
		    line-height: 0;
		    font-size: 0;
		    -webkit-transform: rotate(-45deg) translateX(-50%);
		    -ms-transform: rotate(-45deg) translateX(-50%);
		    -o-transform: rotate(-45deg) translateX(-50%);
		    transform: rotate(-45deg) translateX(-50%);
		    content: "";
		    position: absolute;
		    bottom: $mid-spacing;
		    left: 50%;
		}
	}
	#nav {
		background-color: transparent;
		z-index:5;

		a {
			color:$bgcolor;
			text-shadow: 1px 1px 1px $color;
		}
		&:hover {
			background-color: transparent;
		}
	}
	.featured.block {	
		width: 100%;
		margin: 0 0 $small-spacing;
		order:3;
	    flex-direction: column;
		.image {
			width:100vw;
			height:100vw;
			overflow: hidden;
		}
		.info {
		    height: auto;
	    	text-align: center;
	    	width: calc(100vw - #{$mid-spacing});
	    	margin: -33vw auto 0;
	    	padding: #{$mid-spacing};
			p {
				display: block;
			}
		}
		.more {
			display: block;
			margin-top:30px;
			position: relative;
			bottom: initial;
		}
	}
	.playlists {
		$heading-line-height: 1.2;
		$body-line-height: 1.45;
		$self: $mid-spacing;
		$header: ((1.414em + 2.25em + 0.5em + 1.5em + 1em) * $heading-line-height);
		$more: (#{$small-spacing} + #{$mid-spacing} + (1em * $body-line-height));
    	
    	$imageandpadding: calc(50vw + (2 * #{$small-spacing}) );
		$boxtext: calc(0.667 * ((1.414em + 0.5em) + (1em * #{$body-line-height})));
		$box: (#{$imageandpadding} + #{$boxtext});
		$howmanyboxes: 2;
		max-height: calc(#{$header} + #{$more} + #{$self} + ((#{$box}) * #{$howmanyboxes}));
	}
	.playlist.block {
		a { 
			font-size: 0.667em;
		}
	}
	.archive.block {
	    width: calc(50vw - #{$small-spacing} - (#{$small-spacing} / 2) );
	    flex-direction: column;
	    overflow: hidden;
	    h4 {
	    	color: $color;
	    }
	    .image {
		    width: calc(50vw - #{$small-spacing} - (#{$small-spacing} / 2) );
		    height: calc(50vw - #{$small-spacing} - (#{$small-spacing} / 2) );
	    }
	    .info {
		    width: calc(50vw - #{$small-spacing} - (#{$small-spacing} / 2) );
		    height: auto;
	    	background-color:transparent;
	    	padding: (#{$small-spacing} / 2);
		    font-size: 0.667em;
		    text-align: center;
		    .full {
		    	min-height:0;
		    }
	    	.tag {
	    		display: none;
	    	}
	    	.artist {
	    		margin-top:0;
	    	}
	    	.track {
	    		color: $lightcolor;
	    		margin-bottom:0;
	    	}
	    }
	}
	.page-content {
		overflow:visible;
		position: relative;
		.title {
			display: flex;
			align-items: center;
			min-height:33vh;
		}
		h1 {
		    z-index: 2;
		    font-size: 2.25em;
		}
	}
}
//End of special mobile styles
@media(min-width:768px) {
	.full-content {
		padding:0 15px;
	}
	.block {
		width:50%;
		display:block;
		.image {
			height: calc(3 * #{$mid-spacing});
			width: auto;
		}
		.info {
			height:calc(10 * #{$mid-spacing});
			width: auto;
			padding:$mid-spacing;
			justify-content: flex-start;
			p {
				display:block;
			}
		}
		.tag {
			position:absolute;
			top:calc(-1 * #{$small-spacing});
			left: $mid-spacing;
		}
		.more {
			display:block;
		}
	}
	.featured_popular {
		order:2;
	}
	#thepage {
		padding-top: calc(2 * #{$mid-spacing});
	}
	.wide-content {
		padding:0 30px;
		max-width:1800px;
	    background-color: transparent;
	    border-top: 0;
	    margin-left: 0;
	    margin-right: 0;
	    .more, .less {
			background-color: $altcolor;
	    }
		.more:after {
			border-color: $altcolor transparent transparent; 
		}
		.less:after {
			border-color: transparent transparent $altcolor transparent; 
		}
	}
	.page-content {
		padding:(3 * $mid-spacing) (2 * $mid-spacing);
		p {
			margin:0 auto;
		}
		.title {
			text-align: center;
		}
		.wp-caption-text {
		    line-height: 2;
		    margin-left: $small-spacing;
		    margin-bottom: $mid-spacing;
		    display:block;
		}
	}
	//Switch on fixed nav bar, then set necessary padding adjustments
	#nav {
		position:fixed;
		top:0;
		left:0;
		color:$color;
		border-bottom:1px solid $altcolor;
		a:nth-child(1) {
			display: block;
		}
		&:not(.home) a:nth-child(2) {	
			margin-right:initial;
			padding-right: $mid-spacing;
		}
	}
	// End nav
	#sitetitle {
		left:3em;
		transform: rotate(-25deg) skewX(5deg) skewY(5deg);
	}
	.archive.block, .featured.block {
		width:50%;
		margin:0;
		padding:0 calc(#{$mid-spacing} / 2);
		.image {
			height: calc(0.75 * (33vw - 40px));
		}
		img {
			display: block;
		    width: 100%;
			height: 100%;
		    object-fit: cover;
		}
	}
	.featured.block {
		order: 4;
	    &:nth-of-type(2) {
	    	order:2;
	    }
	}
	.featured_popular {
		order:3;
		.entry {			
			padding: $mid-spacing (3 * $mid-spacing) $mid-spacing $small-spacing;
			margin-left:auto;
			width:initial;
		}
		h3.entry {
			font-size:1.5em;
		}
		a::before {
			display:none;
		}
		a::after {
			counter-increment: popular_entry;
			content: counter(popular_entry);
		    position: absolute;
		    //font-weight: bold;
		    font-size: 2em;
		    margin-right: 1.5 * $mid-spacing;
		    top: 50%;
		    right:0;
		    transform: translateY(-50%);
		}
	}
	.archive.block {	
		padding-bottom:$mid-spacing;
		.info {
			height:calc(7 * #{$mid-spacing});
			p {
				display:none;
			}
		}
	}
	.playlist.block {
	    height: calc((50vw - (4 * #{$mid-spacing})) / 3);
	    width: calc((50vw - #{$mid-spacing}) - (#{$small-spacing / 2}));
	    flex-direction: row;
	    max-width: calc(900px - ((4 * #{$mid-spacing}) + (#{$small-spacing / 2})));
	    overflow: hidden;
	    display: flex;
	    text-align: left;
	    .image {
	    	height: calc((50vw - 120px) / 3);
		    width: calc((50vw - 120px) / 3);
		    max-width: calc((900px - 120px) / 3);
	    }
	    .info {
	    	width: calc(100% - ((50vw - 120px) / 3));
    		height: auto;
	    }
	    p {
	    	display:none;
	    }
	    &:nth-of-type(even) {
	    	flex-direction: row-reverse;
	    	text-align: right;
	    }
	}
}

@media(min-width:1024px) { 
	section.featured {
		padding:$small-spacing;
	}
	.archive.block, .featured.block, .featured_popular {
		width:33%;
		margin:0;
		padding:0 calc(#{$mid-spacing} / 2) $mid-spacing;
		.image {
			height: calc(0.75 * (33vw - 40px));
		}
	}
	.archive.block {	
		.info {
			height:calc(9 * #{$mid-spacing});
			p {
				display:block;
			}
		}
	}
	.featured_popular {
		$entry_padding: 0 $small-spacing 0 (2.5 * $mid-spacing);
		.entry {
			padding: $entry_padding;
			width:100%;
		    &:nth-of-type(1):not(h3) {
		    	margin-top: inherit;
		    }
		    &:last-of-type:not(h3) {
		    	margin-bottom: inherit;
		    }
		}
		h3.entry {
			position: initial;
		    transform: none;
		    top: initial;
			padding: 0;
		    margin: $header_margin;
		    text-align: center;
		}
		a::before {
			display:block;
		}
		a::after {
			content: none;
		}
	}
	.page-content {
		.title {
			text-align: left;
			width:66%;
			margin-right:auto;
		}
		.media {
			width: 33%;
		}
	}
}

@media(min-width:1200px) {
	.playlist.block {
		p {
			display:block;
		}
	}
}
@media(min-width:1440px) {
	.wide-content {
		padding:0 120px;
	}
	.archive.block, .featured.block, .featured_popular {
	    width: 25%;
	    margin: 0;
	    padding: 0 calc(30px / 3) 30px;
	}
	.playlist.block {
		width: calc(50vw - ((4 * #{$mid-spacing}) + (#{$small-spacing / 2})));
		p {
			display:block;
		}
	}
	.featured_popular {
		order:2;
	}
	.featured.block {
	    order: 3;
		&:nth-of-type(-n+3) {
		order:1;
		}
	    &:nth-of-type(n+2) {
	    	display: block;
	    }
	}
}